/*
 * This file was generated by the Gradle 'init' task.
 */
plugins {
    id "java"
    id 'com.github.johnrengelman.shadow' version '7.1.2'
    id 'maven-publish'

}

repositories {
    mavenCentral()
}

java {
    toolchain {
        languageVersion.set(JavaLanguageVersion.of(11))
    }
}

configurations.archives.artifacts.clear()
artifacts {
    add("archives", shadowJar)
}


publishing {
    publications {
        shadow(MavenPublication) { publication ->
            from components.java
            groupId = 'kapperchino'
            artifactId = 'stream-deps'
            version = '0.37'
        }
    }
    repositories {
        maven {
            url = "https://maven.pkg.github.com/Kapperchino/StreamDep"
            credentials {
                username = project.properties['usr']
                password = project.properties['pwd']
            }
        }
    }
}

repositories {
    maven {
        url = "https://maven.pkg.github.com/Kapperchino/scalecube-cluster"
        credentials {
            username = project.properties['usr']
            password = project.properties['pwd']
        }
    }
}

dependencies {
    implementation fileTree(dir: 'lib', include: ['*.jar'])
    implementation 'com.google.guava:guava:31.1-jre'
    implementation 'com.google.dagger:dagger:2.42'
    implementation 'org.apache.commons:commons-text:1.9'
    implementation "io.scalecube:scalecube-cluster:2.6.13"
    implementation "io.scalecube:scalecube-cluster-api:2.6.13"
    implementation "io.scalecube:scalecube-cluster-parent:2.6.13"
    implementation "io.scalecube:scalecube-transport-netty:2.6.13"
    implementation "io.scalecube:scalecube-transport-api:2.6.13"
    implementation "io.scalecube:scalecube-transport-parent:2.6.13"
    implementation 'com.beust:jcommander:1.82'
    implementation 'io.dropwizard.metrics:metrics-core:3.2.5'
    implementation 'ch.qos.logback:logback-classic:1.2.11'
}


shadowJar {
    relocate 'org.apache.ratis.thirdparty.io.opencensus', 'io.opencensus'
    archiveBaseName.set('stream-dep')
    archiveClassifier.set('dep')
    archiveVersion.set('0.37')
}
